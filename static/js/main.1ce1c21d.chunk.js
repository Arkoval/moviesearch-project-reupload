(this["webpackJsonpmovie-search"]=this["webpackJsonpmovie-search"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(2),c=a(3),s=a(4),l=a(1),o=a(5),i=a(0),u=a.n(i),m=a(8),p=a.n(m);a(14),a(15);function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(o.a)(n,e);var t,a=(t=n,function(){var e,a=Object(l.a)(t);if(h()){var n=Object(l.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(s.a)(this,e)});function n(){return Object(r.a)(this,n),a.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.poster,n=e.title,r=e.viewPopup,c=e.movieId;return u.a.createElement("div",{key:t,className:"movieCard"},null==a?u.a.createElement("img",{className:"poster",src:"https://s.tmimgcdn.com/scr/84100/strona-specjalna-cute-404-error-84122_84122-original.jpg",alt:""}):u.a.createElement("img",{className:"poster",src:"http://image.tmdb.org/t/p/w185".concat(a),alt:""}),u.a.createElement("a",{href:"#",onClick:function(){return r(c)}},n))}}]),n}(i.Component),d=function(e){var t=e.movies,a=e.viewPopup;return u.a.createElement("div",{className:"container"},t.map((function(e,t){return u.a.createElement(f,{key:t,poster:e.poster_path,title:e.title,viewPopup:a,movieId:e.id})})))};var v=function(e){var t=e.handleInput,a=e.handleSubmit,n=e.randomMovie,r=e.selectedGenre,c=e.genres,s=e.handleSelect;return u.a.createElement("div",null,u.a.createElement("form",{className:"search",onSubmit:a},u.a.createElement("input",{type:"text",className:"searchInput",placeholder:"Don't be shy, write something",onChange:t}),u.a.createElement("button",{className:"searchBtn btn"},"Search")),u.a.createElement("div",{className:"randomSearch"},u.a.createElement("h1",null,"Look for random"),u.a.createElement("button",{className:"random btn",onClick:n},"Give me random movies!"),u.a.createElement("select",{className:"randomSelect",value:r,onChange:s},c.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)})))))},g=function(e){return u.a.createElement("div",{className:"popup"},u.a.createElement("div",{className:"popupContent"},u.a.createElement("h1",null,e.selected.title," "),u.a.createElement("span",null,"(",e.selected.release_date,")"),u.a.createElement("p",{className:"rating"},"Rating: ",u.a.createElement("span",null," ",e.selected.vote_average)),u.a.createElement("div",{className:"plot"},null==e.selected.poster_path?u.a.createElement("img",{className:"poster",src:"https://s.tmimgcdn.com/scr/84100/strona-specjalna-cute-404-error-84122_84122-original.jpg",alt:""}):u.a.createElement("img",{className:"poster",src:"http://image.tmdb.org/t/p/w185".concat(e.selected.poster_path),alt:""}),u.a.createElement("p",null,e.selected.overview)),u.a.createElement("button",{className:"close",onClick:e.closePopup},"Close"),u.a.createElement("a",{className:"yt",href:"https://www.youtube.com/results?search_query=".concat(e.selected.title,"+trailer"),target:"_blank"},"Youtube trailer")))},E=function(e){for(var t=[],a=function(a){var n=e.currentPage===a?"active":null;t.push(u.a.createElement("li",{key:a,onClick:function(){return e.nextPage(a)}},u.a.createElement("a",{className:n,href:"#"},a)))},n=1;n<=e.pages+1;n++)a(n);return u.a.createElement("ul",{className:"pagination"},t)};function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(o.a)(i,e);var t,a=(t=i,function(){var e,a=Object(l.a)(t);if(b()){var n=Object(l.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(s.a)(this,e)});function i(e){var t;return Object(r.a)(this,i),(t=a.call(this,e)).handleInput=function(e){e.preventDefault(),t.setState({search:[e.target.value]})},t.randomMovie=function(e){e.preventDefault();var a=499*Math.random()+1;fetch("https://api.themoviedb.org/3/discover/movie?api_key=".concat(t.apiUrl,"&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&page=").concat(a,"&with_genres=").concat(t.state.selectedGenre)).then((function(e){return e.json()})).then((function(e){console.log(e),t.setState({movies:e.results})}))},t.handleSelect=function(e){e.preventDefault(),t.setState({selectedGenre:[e.target.value]}),console.log(t.state.selectedGenre)},t.handleSubmit=function(e){e.preventDefault(),fetch("https://api.themoviedb.org/3/search/movie?api_key=".concat(t.apiUrl,"&query=").concat(t.state.search)).then((function(e){return e.json()})).then((function(e){t.setState({movies:Object(n.a)(e.results),results:e.total_results})}))},t.nextPage=function(e){fetch("https://api.themoviedb.org/3/search/movie?api_key=".concat(t.apiUrl,"&query=").concat(t.state.search,"&page=").concat(e)).then((function(e){return e.json()})).then((function(a){t.setState({movies:Object(n.a)(a.results),currentPage:e})}))},t.viewPopup=function(e){var a=t.state.movies.filter((function(t){return t.id===e})),n=a.length>0?a[0]:null;t.setState({selected:n})},t.closePopup=function(){t.setState({selected:null})},t.state={movies:[],search:"",selected:null,currentPage:1,results:0,genres:[],selectedGenre:""},t.apiUrl="5225ac57139869fdc409e5ab72f214fd",t}return Object(c.a)(i,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(this.apiUrl,"&language=en-US")).then((function(e){return e.json()})).then((function(t){e.setState({genres:t.genres})}))}},{key:"render",value:function(){var e=Math.floor(this.state.results/20);return u.a.createElement(u.a.Fragment,null,u.a.createElement("header",null,u.a.createElement("h1",null,"Movies Search")),null==this.state.selected?u.a.createElement("main",null,u.a.createElement(v,{handleSubmit:this.handleSubmit,handleInput:this.handleInput,randomMovie:this.randomMovie,handleSelect:this.handleSelect,genres:this.state.genres,selectedGenre:this.state.selectedGenre}),u.a.createElement(d,{viewPopup:this.viewPopup,movies:this.state.movies})):u.a.createElement(g,{genres:this.state.genres,selected:this.state.selected,closePopup:this.closePopup}),this.state.results>20?u.a.createElement(E,{pages:e,nextPage:this.nextPage,currentPage:this.state.currentPage}):null)}}]),i}(i.Component);p.a.render(u.a.createElement(y,null),document.getElementById("app"))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.1ce1c21d.chunk.js.map